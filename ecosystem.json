{
  "apps":   [
    {
      "name":            "Javascript.ru",
      "script":          "bin/server",
      "node_args":       "--harmony",
      "instances":       "max",
      "exec_mode":       "cluster_mode",
      "env":             {
        "HOST": "127.0.0.1",
        "PORT": "3000",
        "PM2_GRACEFUL_TIMEOUT": 10000
      },
      "env_production":  {
        "NODE_ENV": "production"
      }
    }
  ],
  "deploy": {
    "dev": {
      "user":        "root",
      "host":        "stage",
      "ref":         "origin/production",
      "repo":        "https://github.com/iliakan/javascript-nodejs",
      "path":        "/js/javascript-nodejs",
      "pre-deploy":  "cd /root/javascript-nodejs; bash ./pm2/pre_deploy.sh",
      "post-deploy": "bash ./pm2/post_deploy.sh"
    }
  }
}
